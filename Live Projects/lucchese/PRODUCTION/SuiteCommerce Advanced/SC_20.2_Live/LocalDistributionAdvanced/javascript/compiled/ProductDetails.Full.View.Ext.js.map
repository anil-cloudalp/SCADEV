{"version":3,"sources":["ProductDetails.Full.View.Ext.ts"],"names":[],"mappings":"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","file":"ProductDetails.Full.View.Ext.js","sourcesContent":["/// <amd-module name=\"ProductDetails.Full.View.Ext\"/>\nimport * as _ from 'underscore';\n\nimport ProductDetailsFullView = require('../../../Advanced/ProductDetails/JavaScript/ProductDetails.Full.View');\nimport Utils = require('../../../Commons/Utilities/JavaScript/Utils');\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../../Commons/Utilities/JavaScript/Configuration';\nimport ItemCollection = require('../../../Commons/Item/JavaScript/Item.Collection');\nimport ColorUtils = require('../../../extensions/ColorExt/JavaScript/ColorUtils');\n\n_.extend(ProductDetailsFullView.prototype, {\n  events: _.extend({}, ProductDetailsFullView.prototype.events, {\n    'click .product-views-option-tile-input-picker': 'showStock'\n  }),\nbeforeShowContent: _.wrap(ProductDetailsFullView.prototype.beforeShowContent, function beforeShowContent(fn) {\n\t\tvar promise = fn.apply(this, _.toArray(arguments).slice(1));\n\t\tvar promiseNew = jQuery.Deferred();\n\t\tvar self = this;\n\t\tpromise.always(function(){\n\t\t\tvar familyName = self.model.get('item').get('custitem_appf_b2b_family_name');\n      console.log(\"familyname\",familyName);\n\t\t\tif(familyName){\n\t\t\t\tvar options = {\n\t\t\t\t\t'custitem_appf_b2b_family_name': familyName,\n\t\t\t\t\t'fields': 'urlcomponent,itemoptions_detail'\n\t\t\t\t};\n\t\t\t\tself.colorMaps = new ItemCollection();\n\t\t\t\tself.colorMaps.fetch({data: options}).then(function(){\n\t\t\t\t\tpromiseNew.resolve();\n\t\t\t\t});\n\t\t\t}\n      else{\n\t\t\t\tpromiseNew.resolve();\n\t\t\t}\n\t\t});\n\t\treturn promiseNew;\n\t}),\n  initialize: _.wrap(ProductDetailsFullView.prototype.initialize, function initialize(fn) {\n    fn.apply(this, _.toArray(arguments).slice(1));\n    var self = this;\n    this.application.getLayout().on('afterAppendView', function() {\n      var count = 0;\n      var obj = {};\n\t  var invLocation = Configuration.get('InventoryCart.location') || 109; //9001 DISTR (ID: 109)\n      var optionsLen = _.filter(self.model.get('options').models, function(model: any) {\n          return model.get('isMandatory') && model.get('type') == 'select' && model.get('templateSelector') == \"product_views_option_tile.tpl\";\n      });\n\n      $('.product-views-option-tile-picker').each(function() {\n        if ($(this).hasClass('active')) {\n            obj[$(this).parent().parent().parent().attr('data-item-option-id').trim()] = $(this).text().trim();\n            count++;\n        }\n      });\n      var filteredArr = [];\n      _.each(self.model.get('item').get('matrixchilditems_detail'), function(model: any) {\n        filteredArr.push(model);\n      });\n\n      if (count == optionsLen.length && !_.isEmpty(obj)) {\t\t  \n        var res = self.filter(filteredArr, obj);\n          var total_stock:any = 0;\n        _.each(res, function(res: any) {\n          if (!_.isUndefined(res.quantityavailable_detail)) {\n            if (res.quantityavailable_detail.locations.length > 0) {\n              _.each(res.quantityavailable_detail.locations, function(location: any) {\n\t\t\t\t  console.log(location);\n\t\t\t\t  if(location.internalid == invLocation) \n                total_stock = total_stock + location.quantityavailable;\n              });\n            }\n          }\n        });\n\t\tif(res.length)\n\t\t{\n\t\t\t$('.quantity-available-stock-value-qty').html(total_stock);\n\t\t} \n      }\n    });\n  }),\n\n  showStock: function(e: any) {\n    var obj = {};\n    var self = this;\n    var isOptionsAvailable = true;\n    var count = 0;\n\tvar invLocation = Configuration.get('InventoryCart.location') || 109; //9001 DISTR (ID: 109)\n    _.each(this.model.get('options').models, function(model: any) {\n      if (model.get('isMandatory') && model.get('type') == 'select') {\n        if (model.get('values').length < 1) {\n          isOptionsAvailable = false;\n        }\n      }\n    });\n\n    var optionsLen = _.filter(this.model.get('options').models, function(model: any) {\n\n      return model.get('isMandatory') && model.get('type') == 'select' && model.get('templateSelector') == \"product_views_option_tile.tpl\";\n\n    });\n\n\n    if (isOptionsAvailable) {\n      var label = $(e.currentTarget).parent().text().trim();\n      var itemOptionId = $(e.currentTarget).parent().parent().parent().parent().attr('data-item-option-id').trim();\n      obj[itemOptionId] = label;\n      count++;\n\n      $('.product-views-option-tile-picker').each(function() {\n\n        if ($(this).hasClass('active')) {\n          if (label != $(this).text().trim() && itemOptionId != $(this).parent().parent().parent().attr('data-item-option-id')) {\n\n            obj[$(this).parent().parent().parent().attr('data-item-option-id').trim()] = $(this).text().trim();\n            count++;\n          }\n\n        }\n      });\n\n      var filteredArr = [];\n      _.each(self.model.get('item').get('matrixchilditems_detail'), function(model: any) {\n        filteredArr.push(model);\n      });\n\n      if (count == optionsLen.length && !_.isEmpty(obj)) {\n        var res = this.filter(filteredArr, obj);\n          var total_stock:any = 0;\n        _.each(res, function(res: any) {\n          if (!_.isUndefined(res.quantityavailable_detail)) {\n            if (res.quantityavailable_detail.locations.length > 0) {\n              _.each(res.quantityavailable_detail.locations, function(location: any) {\n\t\t\t\t  if(location.internalid == invLocation) \n                total_stock = total_stock + location.quantityavailable;\n              });\n            }\n          }\n        });\n        $('.quantity-available-stock-value-qty').html(total_stock);\n      }\n    }\n  },\n  filter: function(arr: any, criteria: any) {\n    return arr.filter(function(obj: any) {\n      return Object.keys(criteria).every(function(c) {\n        return obj[c] == criteria[c];\n      });\n    });\n  },\ngetContext: _.wrap(ProductDetailsFullView.prototype.getContext, function getContext(fn) {\n\t\tvar retObj = fn.apply(this, _.toArray(arguments).slice(1));\n\t\t\n\t\n\t\tvar colorObj = this.model.getOption('custcol2');\n\t\tvar internalid = this.model.getItem().get('internalid');\n\t\tvar selectedColorId = (colorObj && colorObj.get('value') && colorObj.get('value').internalid);\n\t\t\n\t\tvar ccode = (colorObj && colorObj.get('value') && colorObj.get('value').label);\n\t\t\n\t\tvar colObj_1:any = ColorUtils.getColorInfo(ccode,internalid);\n\t\t\t\t\n\t\tretObj.colorValue = _.has(colObj_1,'label')? colObj_1['label'] : ccode;\n\t\t\t\n\t\tvar self = this;\n\t\t\n\t\tretObj.colorMaps = _.map(this.getColorMaps(),function(obj:any){\n\t\t\t\n\t\t\tif((obj.colorId == selectedColorId) && (obj.id == internalid)){\n\t\t\t\tobj.selected = true;\n\t\t\t}\n\t\t\t\n\t\t\tvar colObj:any = ColorUtils.getColorInfo(obj.color,obj.id);\n\t\t\t\t\n\t\t\tobj.colorValue = _.has(colObj,'hexcode')? colObj['hexcode'] : '';\n\t\t\tobj.colorLabel = _.has(colObj,'label')? colObj['label'] : '';\n\t\t\t\n\t\t\t\n\t\t\treturn obj;\n\t\t});\n\t\t\n\t\treturn retObj;\n  }),\n  getColorMaps: function(){\n\t  \n\t\tvar colorMaps = [];\n\t\t\n\t\tif(this.colorMaps && this.colorMaps.length){\n\n\t\t\tthis.colorMaps.each(function(model:any){\n\t\t\t\t\n\t\t\t\tvar colorObj:any = model.getOption('custcol2');\n\t\t\t\t\n\t\t\t\tvar colorOpts = (colorObj && colorObj.get('values'))? colorObj.get('values') : [];\n\t\t\t\t\n\t\t\t\t_.each(colorOpts,function(opt:any){\n\t\t\t\t\t\n\t\t\t\t\tif(_.has(opt,'internalid')){\n\t\t\t\t\t\tcolorMaps.push({\n\t\t\t\t\t\t  id: model.get('internalid'),\n\t\t\t\t\t\t  url: model.get('urlcomponent'),\n\t\t\t\t\t\t  colorId: opt.internalid,\n\t\t\t\t\t\t  color: opt.label\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t});\n\t\t}\n\t    else{\n\t\t\tvar model = this.model.get('item');\n\t\t\tvar colorObj:any = model.getOption('custcol2');\n\t\t\t\t\n\t\t\tvar colorOpts = (colorObj && colorObj.get('values'))? colorObj.get('values') : [];\n\t\t\t\n\t\t\t_.each(colorOpts,function(opt:any){\n\t\t\t\t\n\t\t\t\tif(_.has(opt,'internalid')){\n\t\t\t\t\tcolorMaps.push({\n\t\t\t\t\t  id: model.get('internalid'),\n\t\t\t\t\t  url: model.get('urlcomponent'),\n\t\t\t\t\t  colorId: opt.internalid,\n\t\t\t\t\t  color: opt.label\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn colorMaps;\n  }\n\n});\n\nexport = ProductDetailsFullView;\n"]}