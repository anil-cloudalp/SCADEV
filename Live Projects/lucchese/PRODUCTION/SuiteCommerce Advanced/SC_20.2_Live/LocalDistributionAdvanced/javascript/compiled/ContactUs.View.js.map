{"version":3,"sources":["ContactUs.View.ts"],"names":[],"mappings":";;IAmBA,gDAAgD;IAChD,IAAM,aAAa,GAAQ,YAAY,CAAC,MAAM,CAAC;QAC3C,QAAQ,EAAE,cAAc;QAExB,KAAK,EAAE,KAAK,CAAC,SAAS,CAAC,YAAY,CAAC;QAEpC,WAAW,EAAE,KAAK,CAAC,SAAS,CAAC,YAAY,CAAC;QAE1C,UAAU,EAAE;YACR,EAAE,EAAE,YAAY;YAChB,KAAK,EAAE,iBAAiB;SAC3B;QAED,MAAM,EAAE;YACJ,sCAAsC,EAAE,cAAc;YACtD,iCAAiC,EAAE,aAAa;YACtD,aAAa,EAAE,UAAU;YACzB,UAAU,EAAE,eAAe;YAC3B,yBAAyB,EAAE,WAAW;YACtC,6BAA6B,EAAE,cAAc;SAC1C;QACJ,QAAQ,EAAE;YACH,oBAAoB,EAAE,WAAW;YACvC,mBAAmB,EAAE,UAAU;YACzB,kBAAkB,EAAE,SAAS;YAC7B,gBAAgB,EAAE,OAAO;YACzB,eAAe,EAAE,MAAM;YACvB,kBAAkB,EAAE,SAAS;YAC7B,cAAc,EAAE,KAAK;YACrB,gBAAgB,EAAE,OAAO;YAC/B,gBAAgB,EAAE,OAAO;SACtB;QACD,UAAU,EAAE;YAEd,IAAI,CAAC,KAAK,GAAG,IAAI,cAAc,EAAE,CAAC;YAClC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAE3B,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC;QACjD,CAAC;QACJ,QAAQ,EAAE,UAAS,QAAQ,EAAE,QAAQ;YAEpC,IAAI,WAAW,GAAG,IAAI,CAAC,CAAC,CAAC,iCAAiC,CAAC,CAAC;YAE5D,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAErB,IAAG,QAAQ,IAAI,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAC,UAAU,CAAC,EAAC;gBAEzC,WAAW,CAAC,IAAI,CACf,IAAI,iDAAsB,CAAC;oBAC1B,OAAO,EAAE,0DAA0D;oBACnE,IAAI,EAAE,SAAS;oBACf,QAAQ,EAAE,IAAI;iBACd,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CACf,CAAC;aACF;iBACG;gBACH,WAAW,CAAC,IAAI,CACf,IAAI,iDAAsB,CAAC;oBAC1B,OAAO,EAAE,6CAA6C;oBACtD,IAAI,EAAE,OAAO;oBACb,QAAQ,EAAE,IAAI;iBACd,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CACf,CAAC;aACF;QACF,CAAC;QACE,WAAW,EAAE,UAAS,CAAM;YACxB,IAAM,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;YACjC,OAAO,CAAC,GAAG,CAAO,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,CAAE,CAAC,WAAW,EAAE,CAAC,CAAC;QACvD,CAAC;QACD,YAAY,EAAE,UAAS,CAAM;YACzB,IAAM,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAAC,YAAY,CAAC,CAAC;YAC3D,UAAU,CAAC,OAAO,CAAC,eAAe,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,GAAG,EAAE,CAAC;YACnE,UAAU,CAAC,MAAM,EAAE,CAAC;QACxB,CAAC;QAED,gCAAgC;QAChC,UAAU,EAAE;YACR,iBAAiB,EAAE;gBACf,OAAO,IAAI,qBAAqB,CAAC;oBAC7B,SAAS,EAAE,6BAAa,CAAC,GAAG,CAAC,wBAAwB,CAAC;oBACtD,eAAe,EAAE,IAAI,CAAC,gBAAgB;iBACzC,CAAC,CAAC;YACP,CAAC;YACD,UAAU,EAAE;gBACR,OAAO,IAAI,qBAAqB,CAAC;oBAC7B,SAAS,EAAE,6BAAa,CAAC,GAAG,CAAC,wBAAwB,CAAC;oBACtD,eAAe,EAAE,IAAI,CAAC,gBAAgB;oBACtC,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC;iBACzC,CAAC,CAAC;YACP,CAAC;SACJ;QACJ,aAAa,EAAE,UAAS,CAAC;YAExB,MAAM,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAC9C,MAAM,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,OAAO,EAAE,CAAC,MAAM,EAAE,CAAC;QAE5C,CAAC;QACD,SAAS,EAAE,UAAS,CAAC;YAEpB,IAAI,KAAK,GAAO,MAAM,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC;YACpD,MAAM,CAAC,mBAAmB,CAAC,CAAC,IAAI,EAAE,CAAC;YACnC,MAAM,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC;gBAE3B,IAAI,OAAO,GAAO,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;gBAE7D,IAAG,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,CAAC,EAAC;oBAC7C,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC;oBAC7B,MAAM,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;oBAChC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,CAAC;iBAC9B;qBACG;oBACH,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC;oBAC7B,MAAM,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;oBACnC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,CAAC;iBAC9B;YACF,CAAC,CAAC,CAAC;QAEJ,CAAC;QACD,YAAY,EAAE,UAAS,CAAC;YAEvB,MAAM,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE,CAAC;YACxC,MAAM,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QAC/C,CAAC;QACE,UAAU,EAAE;YAGR,OAAO;gBACH,YAAY,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA,CAAC,CAAC,IAAI,CAAA,CAAC,CAAA,KAAK;aAC/E,CAAC;QACN,CAAC;KACJ,CAAC,CAAC;IAEH,OAAS,aAAa,CAAC","file":"ContactUs.View.js","sourcesContent":["\n/// <amd-module name=\"ContactUs.View\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/UnderscoreExtended.d.ts\"/>\nimport * as _ from 'underscore';\nimport * as contact_us_tpl from 'contact_us.tpl';\n\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\n\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\n\nimport { Configuration } from '../../../Commons/Utilities/JavaScript/Configuration';\nimport GlobalViewsStatesView = require('../../../Commons/GlobalViews/JavaScript/GlobalViews.States.View');\nimport CountriesDropdownView = require('../../../Commons/GlobalViews/JavaScript/GlobalViews.CountriesDropdown.View');\nimport BackboneFormView = require('../../../Commons/Backbone.FormView/JavaScript/Backbone.FormView');\nimport ContactUsModel = require('./ContactUs.Model');\n\nimport { GlobalViewsMessageView }  from '../../../Commons/GlobalViews/JavaScript/GlobalViews.Message.View';\n\n// @module ContactUs.View @extends Backbone.View\nconst ContactUsView: any = BackboneView.extend({\n    template: contact_us_tpl,\n\n    title: Utils.translate('Contact Us'),\n\n    page_header: Utils.translate('Contact Us'),\n\n    attributes: {\n        id: 'contact-us',\n        class: 'contact-us-page'\n    },\n\n    events: {\n        'change [data-action=\"selectcountry\"]': 'updateStates',\n        'blur [data-action=\"inputphone\"]': 'formatPhone',\n\t\t'submit form': 'saveForm',\n\t\t'click h3': 'toggleAnswers',\n\t\t'keyup #faq-search-input': 'faqSearch',\n\t\t'click .faq-questions-header': 'toggleBlocks'\n    },\n\tbindings: {\n        '[name=\"firstname\"]': 'firstname',\n\t\t'[name=\"lastname\"]': 'lastname',\n        '[name=\"company\"]': 'company',\n        '[name=\"addr1\"]': 'addr1',\n        '[name=\"city\"]': 'city',\n        '[name=\"country\"]': 'country',\n        '[name=\"zip\"]': 'zip',\n        '[name=\"phone\"]': 'phone',\n\t\t'[name=\"email\"]': 'email'\n    },\n    initialize: function() {\n\t\t\n\t\tthis.model = new ContactUsModel();\n\t\tBackboneFormView.add(this);\n\t\t\n\t\tthis.model.on('save', _.bind(this.redirect, this));\n    },\n\tredirect: function(_context, response) {\n\t\t\n\t\tvar $alert_warn = this.$('[data-type=\"alert-placeholder\"]');\n\t\t\t\t\t\n\t\t$alert_warn.html('');\n\t\t\n\t\tif(response && _.has(response,'recordId')){\n\t\t\t\n\t\t\t$alert_warn.html(\n\t\t\t\tnew GlobalViewsMessageView({\n\t\t\t\t\tmessage: 'Thank You, Your request has been submitted successfully.',\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\tclosable: true\n\t\t\t\t}).render().$el\n\t\t\t);\n\t\t}\n\t\telse{\n\t\t\t$alert_warn.html(\n\t\t\t\tnew GlobalViewsMessageView({\n\t\t\t\t\tmessage: 'Something went wrong,please try again later',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tclosable: true\n\t\t\t\t}).render().$el\n\t\t\t);\n\t\t}\n\t},\n    formatPhone: function(e: any) {\n        const $target = jQuery(e.target);\n        $target.val((<any>_($target.val())).formatPhone());\n    },\n    updateStates: function(e: any) {\n        const statesView = this.getChildViewInstance('StatesView');\n        statesView.options.selectedCountry = this.$(e.currentTarget).val();\n        statesView.render();\n    },\n\n    // @property {Object} childViews\n    childViews: {\n        CountriesDropdown: function() {\n            return new CountriesDropdownView({\n                countries: Configuration.get('siteSettings.countries'),\n                selectedCountry: this.selected_country\n            });\n        },\n        StatesView: function() {\n            return new GlobalViewsStatesView({\n                countries: Configuration.get('siteSettings.countries'),\n                selectedCountry: this.selected_country,\n                selectedState: this.model.get('state')\n            });\n        }\n    },\n\ttoggleAnswers: function(e){\n\n\t\tjQuery(e.currentTarget).toggleClass('active');\n\t\tjQuery(e.currentTarget).nextAll().toggle();\n\n\t},\n\tfaqSearch: function(e)\n\t{\n\t\tvar query:any = jQuery(e.currentTarget).val() || '';\n\t\tjQuery('.faq-answers-hide').show();\n\t\tjQuery('#faq_page h3').each(function(){\n\n\t\t\tvar content:any = jQuery(this).parent().text().toLowerCase();\n\n\t\t\tif(content.indexOf(query.toLowerCase()) != -1){\n\t\t\t\tjQuery(this).parent().show();\n\t\t\t\tjQuery(this).addClass('active');\n\t\t\t\tjQuery(this).nextAll().show();\n\t\t\t}\n\t\t\telse{\n\t\t\t\tjQuery(this).parent().hide();\n\t\t\t\tjQuery(this).removeClass('active');\n\t\t\t\tjQuery(this).nextAll().hide();\n\t\t\t}\n\t\t});\n\n\t},\n\ttoggleBlocks: function(e)\n\t{\n\t\tjQuery(e.currentTarget).next().toggle();\n\t\tjQuery(e.currentTarget).toggleClass('active');\n\t},\n    getContext: function() {\n       \n\n        return {\n            isNotCmsEdit: (window.parent.location.href.indexOf(\"cms\") == -1)? true:false\n        };\n    }\n});\n\nexport = ContactUsView;\n"]}