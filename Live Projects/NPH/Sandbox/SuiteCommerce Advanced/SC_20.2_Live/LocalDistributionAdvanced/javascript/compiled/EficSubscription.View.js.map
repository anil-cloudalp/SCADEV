{"version":3,"sources":["EficSubscription.View.ts"],"names":[],"mappings":"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","file":"EficSubscription.View.js","sourcesContent":["/// <amd-module name=\"EficSubscription.View\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/UnderscoreExtended.d.ts\"/>\n\nimport * as _ from 'underscore';\nimport * as efic_subscription_tpl from 'efic_subscription.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../../Advanced/SCA/JavaScript/Configuration';\n\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\nimport { GlobalViewsPaginationView } from '../../../Commons/GlobalViews/JavaScript/GlobalViews.Pagination.View';\n\nconst CustomView: any = BackboneView.extend({\n\t//@property {Function} template\n\ttemplate: efic_subscription_tpl\n\t//@property {String} title\n,\ttitle: Utils.translate('Digital Forward in Christ')\n\t//@property {String} className\n,\tclassName: 'EficSubscriptionView'\n\t//@property {String} page_header\n,\tpage_header: Utils.translate('Digital Forward in Christ')\n\t//@property {Object} attributes\n,\tattributes: {\n\t\t'id': 'efic_subscription'\n\t,\t'class': 'EficSubscriptionView'\n\t}\n\t//@property {Object} events\n,\tevents: {\n\t//\t'click #prev-mo': 'prevMo'\n//\t,\t'click #next-mo': 'nextMo' ,\n\t\t'click #prev-yr': 'prevYr'\n\t,\t'click #next-yr': 'nextYr'\n\t,\t'click [data-date]': 'handleDate'\n\t}\n,\thandleDate: function(e)\n\t{\n\t\t\n\t\tif($(e.target).is('p'))\n\t\t\tvar dateEl = $(e.target);\n\t\telse\n\t\t\tvar dateEl = $(e.target).parent();\n\t\t\n\t\tvar emeds_date = dateEl.attr('data-date');\n\n\t\tvar today = new Date();\n\t\t\n\t\tvar emeds_date_obj = new Date(emeds_date);\n//commenting as to display subscription record before 1st of a month if available.\n\t\t//if(emeds_date_obj.getTime() <= today.getTime()){\n\t\t\t\n\t\t\t$('[data-date]').removeClass('bg-info');\n\t\t\tdateEl.addClass('bg-info');\n\t\t\n\t\t\tthis.emeds_date = emeds_date;\n\t\t\t\n\t\t\tthis.calendar.currentMonth = emeds_date_obj.getMonth();\n\t\t\tthis.$('#calender-month').text(this.calendar.months[this.calendar.currentMonth]);\n\t\t\t\n\t\t\tvar self = this;\n\t\t\tthis.refreshData().then(function(){\n\t\t\t\tself.$('#efic-subscriptions').html(self.creatingHtml());\n\t\t\t});\n\t\t\t\n\t\t//}\n\t}\n,\trefreshData: function()\n\t{\n\t\t\n\t\tthis.filters = {\n\t\t\ttype: 'EFIC',\n\t\t\tresults_per_page: 20,\n\t\t\tdate: this.emeds_date\n\t\t}\n\t\t\n\t\t\n\t\treturn this.getResultsforhandle(this.filters);\n\t}\n,\trefreshfirstData: function(){\n\n\t\tthis.filters = {\n\t\t\ttype: 'EFIC',\n\t\t\tresults_per_page: 20,\n\t\t}\n\n\t\treturn this.getResults(this.filters);\n\t}\n\n\t\n\t//@method getSelectedMenu\n,\tgetSelectedMenu: function ()\n\t{\n\t\treturn 'my_subscriptions';\n\t}\n\t//@method getBreadcrumbPages\n,\tgetBreadcrumbPages: function ()\n\t{\n\t\treturn {\n\t\t\t\ttext: this.title\n\t\t\t,\thref: '/digital-forward-in-christ'\n\t\t};\n\t}\n\t//@method initialize\n,\tinitialize: function (options)\n\t{\n\t\tthis.application = options.application;\n\t\t\n\t\tvar calendar:any = {};\n\t\tcalendar.today = new Date();\n\t\tcalendar.currentMonth = calendar.today.getMonth();\n\t\tcalendar.currentYear = calendar.today.getFullYear();\n\t\tcalendar.months = ['January','February','March','April','May','June','July','August','September','October','November','December'];\n\n\t\tthis.calendar = calendar;\n\t\tthis.emeds_date = (calendar.currentMonth + 1) +'/'+ calendar.today.getDate() +'/'+ calendar.currentYear;\n\t\t\n\t/*\tvar self = this;\n\t\tthis.once('afterViewRender',function(){\n\t\t\tself.showCalendar(calendar.currentMonth,calendar.currentYear);\n\t\t\tself.$('#efic-subscriptions').html(self.createHtml());\n\t\t});*/\n\t}\n,\tbeforeShowContent: function()\n\t{\t\n\t\treturn this.refreshfirstData();\n\t}\n,\tgetResults: function(data)\n\t{\n\t\tvar self = this;\n\t\t\n\t\tvar promise = new Backbone.Model().save(\n\t\t\t\t\tdata\n\t\t\t\t,\t{\n\t\t\t\t\t\turl: Utils.getAbsoluteUrl('services/Subscriptions.Service.ss')\n\n\t\t\t\t\t},{wait:true}\n\t\t\t\t);\n\t\t\t\tpromise.then(function(result){\n\t\t\t\t\t\n\t\t\t\t\tself.collection = result;\n\t\t\t\t});\n\t\tthis.once('afterViewRender',function(){\n\t\t\tvar recnetrecord = (self.collection.records.date);\n\n\t\t\tvar recentrecyear = recnetrecord.split('/');\n\n\t\t\tconsole.log(\"parseInt(recentrecyear[2])\",parseInt(recentrecyear[2]));\n\n\t\t\tself.recentyear = parseInt(recentrecyear[2]);\n\n\t\t\tself.mostrecentrecords = self.recentyear;\n\n\t\t\tself.showCalendar((parseInt(recentrecyear[0])-1), self.recentyear);\n\n\t\t\tself.$('#efic-subscriptions').html(self.createHtml());\n\t\t});\t\t\n\t\t\t\t\n\t\t\treturn promise;\n\t}\n,\tgetResultsforhandle: function(data)\n\t{\n\n\n\t\tvar self = this;\n\n\t\tvar promise = new Backbone.Model().save(\n\t\t\t\t\tdata\n\t\t\t\t,\t{\n\t\t\t\t\t\turl: Utils.getAbsoluteUrl('services/Subscriptions.Service.ss')\n\n\t\t\t\t\t},{wait:true}\n\t\t\t\t);\n\t\t\t\tpromise.then(function(result){\n\t\t\t\t\t\n\t\t\t\t\tself.collection = result;\n\t\t\t\t});\n\n\t\t\treturn promise;\n\t}\t\n\n\t//@property {Object} childViews\n,\tchildViews: {\n\t\t\n\t}\n,\tcreateHtml: function()\n\t{    \n\t\tvar\trecords = _.has(this.collection,'records')? this.collection.records: [];\n\t\tvar haveSubscription = _.has(this.collection,'haveSubscription')? this.collection.haveSubscription: true;\n\t\t\n\t\tvar html = '';\n\t\t\n\t\tif(haveSubscription){\n\t\t\tif(records){\n\t\t\t\t\thtml +='<div class=\"col-sm-5\"><div class=\"img-container\"><img src=\"'+records.imageUrl+'\"/></div><div class=\"btn-container\"><a href=\"'+records.issue_link+'\">View Issue</a></div></div>';\n\t\t\t\t\thtml +='<div class=\"col-sm-7 efic-content\">'+ records.content +'</div>';\n\t\t\t}\n\t\t\telse{\n\t\t\t\thtml +='<h2> No Records Available</h2>';\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\thtml +='<h2> No subscriptions Available</h2>';\n\t\t}\n\t\t\n\t\treturn html;\n\t}\n\n, \tcreatingHtml: function()\n{    \n\tvar\trecords = _.has(this.collection,'records')? this.collection.records: [];\n\tvar haveSubscription = _.has(this.collection,'haveSubscription')? this.collection.haveSubscription: true;\n\t\n\tvar html = '';\n\t\n\tif(haveSubscription){\n\n\t\tif(records && records.date == this.emeds_date){\n\t\t\t\thtml +='<div class=\"col-sm-5\"><div class=\"img-container\"><img src=\"'+records.imageUrl+'\"/></div><div class=\"btn-container\"><a href=\"'+records.issue_link+'\">View Issue</a></div></div>';\n\t\t\t\thtml +='<div class=\"col-sm-7 efic-content\">'+ records.content +'</div>';\n\t\t}\n\t\telse{\n\t\t\thtml +='<h2> No Records Available</h2>';\n\t\t}\n\t}\n\telse{\n\t\thtml +='<h2> No subscriptions Available</h2>';\n\t}\n\t\n\treturn html;\n}\n,\tnextMo: function(e)\n\t{\n\t\te.stopPropagation();\n\t\t\n\t\tif((this.calendar.currentYear == this.calendar.today.getFullYear()) && (this.calendar.currentMonth == this.calendar.today.getMonth()))\n\t\t\treturn;\n\t\t\n\t\tthis.calendar.currentYear = (this.calendar.currentMonth === 11) ? this.calendar.currentYear + 1 : this.calendar.currentYear;\n\t\tthis.calendar.currentMonth = (this.calendar.currentMonth + 1) % 12;\n\t\tthis.showCalendar(this.calendar.currentMonth, this.calendar.currentYear);\n\t}\n\n,\tprevMo: function(e)\n\t{\n\t\te.stopPropagation();\n\t\tthis.calendar.currentYear = (this.calendar.currentMonth === 0) ? this.calendar.currentYear - 1 : this.calendar.currentYear;\n\t\tthis.calendar.currentMonth = (this.calendar.currentMonth === 0) ? 11 : this.calendar.currentMonth - 1;\n\t\tthis.showCalendar(this.calendar.currentMonth, this.calendar.currentYear);\n\t}\n,\tnextYr: function(e)\n\t{\n\t\te.stopPropagation();\n\t\tif(this.recentyear == this.mostrecentrecords)\n\t\t\treturn;\n\t\t\n\t\tif(((this.calendar.currentYear + 1) == this.calendar.today.getFullYear()) && (this.calendar.currentMonth > this.calendar.today.getMonth()))\n\t\t\tthis.calendar.currentMonth = this.calendar.today.getMonth();\n\t\t\n\t\tthis.recentyear++;\n\t\tthis.showCalendar(this.calendar.currentMonth,this.recentyear);\n\t\t\n\t}\n\n,\tprevYr: function(e)\n\t{\n\t\te.stopPropagation();\n\t\tthis.recentyear--;\n\t\tthis.showCalendar(this.calendar.currentMonth, this.recentyear);\n\t}\n,\tgetSlides: function()\n\t{\n\t\tvar screenWidth = window.screen.width;\n\t\tvar slides;\n\t\t\n\t\tif(screenWidth <= 510)\n\t\t\tslides = 4;\n\t\t\n\t\tif(screenWidth > 510)\n\t\t\tslides = 8;\n\t\treturn slides;\n\t}\n,\tshowCalendar: function(month, year)\n\t{\n\t\tvar firstDay = (new Date(year, month)).getDay();\n\t\tvar daysInMonth = 32 - new Date(year, month, 32).getDate();\n\t\t\n\t\tvar today = this.calendar.today;\n\t\tvar tbl = this.$('#calender-dates'); // body of the calendar\n\t\t\n\t\t// clearing all previous cells\n\t\ttbl.html('');\n\t\n\t\t// filing data about month and in the page via DOM.\n\t\tthis.$('#calender-month').text(this.calendar.months[month]);\n\t\tthis.$('#calender-year').text(year);\n\t\t\n\t\t// creating all cells\n\t\tvar efic_month = 0;\n\t\tvar date = 1;\n\t\tvar slides = 9;\n\t\tvar startSlide = 0;\n\t\t\n\t\tvar row = document.createElement(\"div\");\n\t\trow.setAttribute('id','calendar-dates-row');\n\t\tvar self = this;\n\t\tfor (var i = 0; i < 12; i++) {\n\n\t\t\t\tif (year === self.mostrecentrecords && efic_month > (parseInt(self.collection.records.date)-1)){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\tvar cell = document.createElement(\"p\");\n\t\t\t\t\t\n\t\t\t\t\tcell.setAttribute('data-date',(efic_month + 1) +'/'+date +'/'+ year);\n\t\t\t\t\t//cell.setAttribute('id',(efic_month + 1) +'/'+date +'/'+ year);\n\t\t\t\t\t\n\t\t\t\t\tvar cellText = '<div class=\"date\">' + date + '</div>' + self.calendar.months[efic_month]; \n\t\t\t\t\tvar recentMonth = (self.collection.records.date);\n\t\t\t\t\tvar a = recentMonth.split(\"/\");\n\t\t\t\t\tif (year === today.getFullYear() && efic_month === (parseInt(a[0])-1)) {\n\t\t\t\t\t\tcell.classList.add(\"bg-info\");\n\t\t\t\t\t\tslides = self.getSlides();\n\t\t\t\t\t\tstartSlide = (efic_month + 1)/slides;\n\t\t\t\t\t} // color today's date\n\t\t\t\t\t//cell.appendChild(cellText);\n\t\t\t\t\t$(cell).append(cellText);\n\t\t\t\t\trow.appendChild(cell);\n\t\t\t\t\tefic_month++;\n\t\t\t\t}\n\t\t}\n\t\t\n\t\ttbl.append(row); // appending each row into calendar body.\n\t\tthis.$('#calendar-dates-row').ready(\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tUtils.initBxSlider(self.$('#calendar-dates-row'),{\n\t\t\t\t\tslideWidth: 121,\n\t\t\t\t\tminSlides: 4,\n\t\t\t\t\tmaxSlides: slides,\n\t\t\t\t\tforceStart: true,\n\t\t\t\t\tpager: false,\n\t\t\t\t\ttouchEnabled: true,\n\t\t\t\t\tprevText: '<span id=\"prev-dt\"></span>',\n\t\t\t\t\tnextText: '<span id=\"next-dt\"></span>',\n\t\t\t\t\tcontrols: true,\n\t\t\t\t\tpreloadImages: \"all\",\n\t\t\t\t\tinfiniteLoop:false,\n\t\t\t\t\tstartSlide: 1 //startSlide\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t}, 100)\n\t\t);\n\t\t\n\t\n\t}\n\t//@method getContext @return DailyMeditations.View.Context\n,\tgetContext: function ()\n\t{\t\n\t\t\n\t\t//@class DailyMeditations.View.Context\n\t\treturn {\n\t\t\thaveSubscription: _.has(this.collection,'haveSubscription')? this.collection.haveSubscription: true\n\t\t};\n\t}\n});\n\nexport = CustomView;"]}