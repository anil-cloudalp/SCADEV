{"version":3,"sources":["NPHRecommends.View.ts"],"names":[],"mappings":"AAAA,2CAA2C;;;IAY3C,6DAA6D;IAC7D,IAAM,iBAAiB,GAAG,sBAAsB,CAAC,MAAM,CAAC;QAEpD,UAAU,EAAE;YAEd,IAAI,IAAI,GAAG,IAAI,CAAC;YAEd,sBAAsB,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE;gBACxD,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU;gBACnC,WAAW,EAAE,QAAQ;gBACrB,YAAY,EAAE,uBAAuB;gBACrC,WAAW,EAAE,sBAAsB;gBACnC,SAAS,EAAE,4BAA4B;gBACvC,QAAQ,EAAE,iBAAiB;aACzB,CAAC,CAAC;YAEL,IAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC;YAEpD,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;YAC3D,MAAM,CAAC,WAAW,IAAI,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,0BAA0B,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QACpG,CAAC;QACJ,eAAe,EAAE;YAEhB,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,IAAI,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,8BAA8B,CAAC,CAAC;YAErD,OAAO,CAAC,KAAK,CAAC;gBACZ,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE;oBAC3B,SAAS,EAAE,CAAC;oBACX,UAAU,EAAE,GAAG;oBACf,SAAS,EAAE,CAAC;oBACZ,UAAU,EAAE,IAAI;oBAChB,KAAK,EAAE,KAAK;oBACZ,YAAY,EAAC,KAAK;oBAClB,QAAQ,EAAE,4DAA4D,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,iDAAiD;oBACpJ,QAAQ,EAAE,gGAAgG,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,aAAa;oBACpJ,QAAQ,EAAE,IAAI;oBACd,aAAa,EAAE,KAAK;iBACtB,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;QACJ,CAAC;QACD,OAAO,EAAE,SAAS,OAAO;YACxB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC;YAEpD,MAAM,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;YAC3D,MAAM,CAAC,WAAW,IAAI,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,0BAA0B,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;QACpG,CAAC;KAEF,CAAC,CAAC;IACL,OAAS,iBAAiB,CAAC","file":"NPHRecommends.View.js","sourcesContent":["/// <amd-module name=\"NPHRecommends.View\"/>\n\nimport * as _ from 'underscore';\nimport * as item_relations_cell_tpl from 'item_relations_cell.tpl';\nimport * as item_relations_row_tpl from 'item_relations_row.tpl';\nimport * as nphrecommends_tpl from 'nphrecommends.tpl';\n\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport BackboneCollectionView = require('../../../Commons/Backbone.CollectionView/JavaScript/Backbone.CollectionView');\nimport ItemRelationsRelatedItemView = require('../../../Commons/ItemRelations/JavaScript/ItemRelations.RelatedItem.View');\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\n\n// @class NPHRecommends.View @extends Backbone.CollectionView\nconst NPHRecommendsView = BackboneCollectionView.extend({\n\t\n    initialize: function () {\n\t\t\n\t\tvar self = this;\n\t\t\n\t\t  BackboneCollectionView.prototype.initialize.call(this, {\n\t\t\tcollection: self.options.collection,\n\t\t\tviewsPerRow: Infinity,\n\t\t\tcellTemplate: item_relations_cell_tpl,\n\t\t\trowTemplate: item_relations_row_tpl,\n\t\t\tchildView: ItemRelationsRelatedItemView,\n\t\t\ttemplate: nphrecommends_tpl\n\t\t  });\n\t\t  \n\t\tconst layout = this.options.application.getLayout();\n\t  \n\t\tlayout.once('afterAppendView', this.loadRelatedItem, this);\n\t\tlayout.currentView && layout.currentView.once('afterCompositeViewRender', this.loadRelatedItem, this);\n    },\n\tloadRelatedItem: function()\n\t{\t\n\t\tvar self = this;\n\t\tvar $slider = this.$('[data-type=\"carousel-items\"]');\n\t\t\n\t\t$slider.ready(function(){\n\t\t\t Utils.initBxSlider($slider, {\t\n\t\t\t\t minSlides: 2\n\t\t\t\t,\tslideWidth: 297\n\t\t\t\t,\tmaxSlides: 4\n\t\t\t\t,\tforceStart: true\n\t\t\t\t,\tpager: false\n\t\t\t\t,\ttouchEnabled:false\n\t\t\t\t,\tnextText: '<a class=\"home-item-sec2-next\"><span class=\"control-text\">' + Utils.translate('next') + '</span> <i class=\"carousel-next-arrow\"></i></a>'\n\t\t\t\t,\tprevText: '<a class=\"home-item-sec2-prev\"><i class=\"carousel-prev-arrow\"></i> <span class=\"control-text\">' + Utils.translate('prev') + '</span></a>'\n\t\t\t\t,\tcontrols: true\n\t\t\t\t,\tpreloadImages: 'all'\n\t\t\t});\n\t\t});\n\t},\n\tdestroy: function destroy() {\n\t\tthis._destroy();\n\t\tconst layout = this.options.application.getLayout();\n\t\t\n\t\tlayout.off('afterAppendView', this.loadRelatedItems, this);\n\t\tlayout.currentView && layout.currentView.off('afterCompositeViewRender', this.loadRelatedItems, this);\n    }\n    \n  });\nexport = NPHRecommendsView;\n"]}