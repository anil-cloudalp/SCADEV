{"version":3,"sources":["captcha.js"],"names":[],"mappings":"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","file":"captcha.js","sourcesContent":["(function(window, document, $, undefined){\n\n\n\tvar possibleCharacters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n\tvar defaults = {\n\n\t\tselector: \"#captcha\",\n\t\ttext: null,\n\t\trandomText: true,\n\t\trandomColours: false,\n\t\twidth: 202,\n\t\theight: 52,\n\t\tcolour1: null,\n\t\tcolour2: null,\n\t\tfont: 'normal 30px \"Comic Sans MS\", cursive, sans-serif',\n\t\tonSuccess: function() {\n\t\t\talert('Correct!');\n\t\t},\n\t\tonFailure: function() {\n\t\t\talert('wrong!');\n\t\t}\n\t};\n\n\tvar CAPTCHA = function(config) {\n\n\t\tvar that = this;\n\n\t\tthis._settings = $.extend({}, defaults, config || {});\n\n\t\tthis._container = $('#captcha');\n\n\t\tvar canvasWrapper = $('<div class=\"canvas-container\">').appendTo(this._container);\n\t\t\n\t\t\tcanvasWrapper.append('<div class=\"refresh-btn\"><img src=\"/media/images/reload.png\" alt=\"refresh-btn\"/></div>');\n\n\t\tthis._canvas = $('<canvas>').appendTo(canvasWrapper).attr(\"width\", this._settings.width).attr(\"height\", this._settings.height);\n\n\t\tthis._context = this._canvas.get(0).getContext(\"2d\");\n\n\t};\n\n\tCAPTCHA.prototype = {\n\n\t\tgenerate: function() {\n\n\t\t\tvar context = this._context;\n\n\t\t\t//if there's no text, set the flag to randomly generate some\n\t\t\tif (this._settings.text == null || this._settings.text == '') {\n\t\t\t\tthis._settings.randomText = true;\n\t\t\t}\n\n\t\t\tif (this._settings.randomText) {\n\t\t\t\tthis._generateRandomText();\n\t\t\t}\n\n\t\t\tif (this._settings.randomColours) {\n\t\t\t\tthis._settings.colour1 = this._generateRandomColour();\n\t\t\t   // this._settings.colour2 = this._generateRandomColour();\n\t\t\t}                \n\n\n\t\t\tcontext.fillStyle = '#fff';\n\t\t\tcontext.fillRect(0, 0, this._settings.width, this._settings.height);\n\t\t\t\n\n\n\t\t\tcontext.font = this._settings.font;\n\t\t\tcontext.fillStyle = '#000';\n\n\t\t\tcontext.setTransform((Math.random() / 10) + 0.9, //scalex\n\t\t\t\t0.1 - (Math.random() / 5), //skewx\n\t\t\t\t0.1 - (Math.random() / 5), //skewy\n\t\t\t\t(Math.random() / 10) + 0.9, //scaley\n\t\t\t\t(Math.random() * 20) + 10, //transx\n\t\t\t\t40); //transy\n\n\t\t\tcontext.fillText(this._settings.text, 0, 0);\n\n\t\t\tcontext.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tfor(var i = 0; i< 90; i++){\n\t\t\t\tvar x = Math.floor(Math.random() * (this._settings.width));\n\t\t\t\tvar y = Math.floor(Math.random() * (this._settings.height));\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.arc(x, y, 1, 0, 2 * Math.PI, true);\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t\t\n\t\t\tvar numRandomCurves = 4;\n\t\t\t\n\t\t\tfor (var i = 0; i < numRandomCurves; i++) {\n\t\t\t\tthis._drawRandomCurve();\n\t\t\t}\n\t\t},\n\n\t\tvalidate: function(userText) {\n\t\t\tif (userText === this._settings.text) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\t_drawRandomCurve: function() {\n\n\t\t\tvar ctx = this._context;\n\n\t\t\t\n\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.strokeStyle = '#000';\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(Math.floor((Math.random() * this._settings.width)), Math.floor((Math.random() * this._settings.height)));\n\t\t\tctx.bezierCurveTo(Math.floor((Math.random() * this._settings.width)), Math.floor((Math.random() * this._settings.height)),\n\t\t\t\tMath.floor((Math.random() * this._settings.width)), Math.floor((Math.random() * this._settings.height)),\n\t\t\t\tMath.floor((Math.random() * this._settings.width)), Math.floor((Math.random() * this._settings.height)));\n\t\t\tctx.stroke();\n\t\t},\n\n\t\t_generateRandomText: function() {\n\t\t\tthis._settings.text = '';\n\t\t\tvar length = Math.floor((Math.random() * 3) + 6);\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tthis._settings.text += possibleCharacters.charAt(Math.floor(Math.random() * possibleCharacters.length));\n\t\t\t}\n\t\t},\n\n\t\t_generateRandomColour: function() {\n\t\t\treturn \"rgb(\" + Math.floor((Math.random() * 255)) + \", \" + Math.floor((Math.random() * 255)) + \", \" + Math.floor((Math.random() * 255)) + \")\";\n\t\t}\n\t};\n\n\t$.Captcha = CAPTCHA || {};\n\n})(window,document,jQuery);"]}