{"version":3,"sources":["ContactUsForm.View.ts"],"names":[],"mappings":"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","file":"ContactUsForm.View.js","sourcesContent":["/// <amd-module name=\"ContactUsForm.View\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/UnderscoreExtended.d.ts\"/>\n\nimport * as _ from 'underscore';\nimport * as contact_us_form_tpl from 'contact_us_form.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../../Advanced/SCA/JavaScript/Configuration';\n\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\nimport CustomModulesModel = require('./CustomModules.Model');\nimport BackboneFormView = require('../../../Commons/Backbone.FormView/JavaScript/Backbone.FormView');\n\nconst CustomView: any = BackboneView.extend({\n\n\t\ttemplate: contact_us_form_tpl\n\t,   title: 'Contact Form'\n\t,\tgetBreadcrumbPages: function ()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.title\n\t\t\t,\thref: ''\n\t\t\t};\n\t\t}\n  ,\tevents:{\n                  'submit form': 'createContactLead'\n                  ,'blur .contact-us-field': 'blockErr'\n           }\n  ,\tinitialize: function (option){\n\n             this.model = new CustomModulesModel();\n             BackboneFormView.add(this);\n\n     }\n\n  , blockErr: function(e)\n       {\tvar thisEl = $(e.currentTarget);\n          var self = this;\n         if(thisEl.attr('data-label')){\n         if(thisEl.val()){\n             if(thisEl.parent().find('[data-validation-error=\"block\"]').length > 0){\n             thisEl.parent().removeAttr('data-validation-error');\n             thisEl.parent().find('[data-validation-error=\"block\"]').remove();\n           }\n         }\n         else{\n             if(thisEl.parent().find('p[data-validation-error=\"block\"]').length == 0){\n               thisEl.parent().attr('data-validation-error','');\n               thisEl.parent().append('<p data-validation-error=\"block\">'+ thisEl.attr('data-label')+' is required.</p>');\n            }\n          }\n       }\n    }\n\n  , createContactLead: function(e)\n     {\n          e.preventDefault();\n          this.error = false;\n          var contactFields = {};\n          var self = this;\n\n       $('.contact-us-field').each(function(){\n          if($(this).val() == '' || $(this).val() == null){\n          if($(this).attr('data-label') )\n          {\n             self.error = true;\n             $(this).trigger('blur');\n          }\n        }\n        else{\n                contactFields[$(this).attr('id')] = $(this).val();\n            }\n\n       });\n\n      if(!this.error)\n      {\n\n        this.model.set('contactFields',contactFields);\n        this.model.set('urlFragment','/contact-modal');\n\n\n        var self = this\n        ,\tres = []\n        ,\tpromise = this.saveForm(e);\n\n\n        if (promise)\n         {\tself.promise = promise;\n\n              promise.fail(function (jqXhr)\n              {\n                jqXhr.preventDefault = true;\n              }).done().always(_.bind(self.render, self));\n         }\n      }\n\n    }\n\n  ,\tgetContext: function()\n        {\n              var isError = false\n              ,\tresponse = ''\n              ,\tisResponse = false;\n\n        if(this.promise){\n\n                if(this.promise.responseJSON.hasOwnProperty('id'))\n          {\n                  response = 'Your application is successfully sent.';\n                  isError = false;\n                  isResponse = true;\n          }\n          else{\n                   response = 'Something went wrong! application could not sent.';\n                   isError = true;\n                   isResponse = true;\n          }\n        }\n        return {\n              isError: isError\n            ,\tresponse: response\n            ,\tisResponse: isResponse\n        };\n        }\n\n   });\nexport = CustomView;\n"]}