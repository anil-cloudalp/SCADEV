{"version":3,"sources":["ReturnsExchanges.View.ts"],"names":[],"mappings":"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","file":"ReturnsExchanges.View.js","sourcesContent":["/// <amd-module name=\"ReturnsExchanges.View\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/UnderscoreExtended.d.ts\"/>\n\nimport * as _ from 'underscore';\nimport * as returns_exchanges_tpl from 'returns_exchanges.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../../Advanced/SCA/JavaScript/Configuration';\n\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\nimport CustomModulesModel = require('./CustomModules.Model');\nimport BackboneFormView = require('../../../Commons/Backbone.FormView/JavaScript/Backbone.FormView');\n\nconst CustomView: any = BackboneView.extend({\n\n\t\ttemplate: returns_exchanges_tpl\n\t,     title: 'Returns\t& Exchanges'\n\n    ,\tevents:  {\n                  'submit form': 'createLead'\n                  ,'change #reason-for-return': 'toggleReason'\n                  ,'blur .returns-field': 'blockErr'\n               }\n\n\t,\tinitialize: function (option){\n\n\t  this.model = new CustomModulesModel();\n\n\n\t  BackboneFormView.add(this);\n\t  var self = this;\n\t  \n\t\t  // BackboneFormView.add(this);\n\t}\n\n\t,toggleReason: function(e)\n\t{\n\t  if($(e.target).val()==\"3\")\n\t{\n\t\t$(\"#parent_reason\").css(\"display\", \"block\");\n\t\t$(\"#reason\").addClass(\"returns-field\");\n\n\t}\n\t else\n\t {\n\t\t   $(\"#parent_reason\").css(\"display\", \"none\");\n\t\t  $(\"#reason\").removeClass(\"returns-field\");\n\n\n\t }\n\t}\n\t,\tblockErr: function(e)\n\t  {\tvar thisEl = $(e.currentTarget);\n\t\tvar self = this;\n\t\tif(thisEl.attr('data-label')){\n\t\t  if(thisEl.val()){\n\t\t\tif(thisEl.parent().find('[data-validation-error=\"block\"]').length > 0){\n\t\t\tthisEl.parent().removeAttr('data-validation-error');\n\t\t\tthisEl.parent().find('[data-validation-error=\"block\"]').remove();\n\t\t\t}\n\t\t  }\n\t\t  else{\n\t\t\tif(thisEl.parent().find('p[data-validation-error=\"block\"]').length == 0){\n\t\t\t\tthisEl.parent().attr('data-validation-error','');\n\t\t\tthisEl.parent().append('<p data-validation-error=\"block\">'+ thisEl.attr('data-label')+' is required.</p>');\n\t\t\t}\n\t\t  }\n\t\t}\n\t  }\n\n\t,\tcreateLead: function(e)\n\t  {\n\t\te.preventDefault();\n\t\tthis.error = false;\n\t\t var returnsFields = {};\n\t\tvar self = this;\n\t\t $('.returns-field').each(function(){\n\n\t\t\t  if($(this).val() == '' || $(this).val() == null){\n\t\t\t\tif($(this).attr('data-label') )\n\t\t\t\t{\n\t\t\t\t   self.error = true;\n\t\t\t\t   $(this).trigger('blur');\n\t\t\t\t }\n\n\t\t\t  }\n\t\t\telse{\n\t\t\t\t  returnsFields[$(this).attr('id')] = $(this).val();\n\t\t\t\t}\n\n\t\t });\n\n\t\tif(!this.error)\n\t\t{\n\t\t  this.model.set('returnsFields',returnsFields);\n\t\t  this.model.set('urlFragment','/returns');\n\n\n\t\t  var self = this\n\t\t  ,\tres = []\n\t\t  ,\tpromise = this.saveForm(e);\n\n\n\t\t  if (promise)\n\t\t   {\tself.promise = promise;\n\n\t\t\tpromise.fail(function (jqXhr)\n\t\t\t{\n\t\t\t  jqXhr.preventDefault = true;\n\t\t\t}).done().always(_.bind(self.render, self));\n\t\t  }\n\t\t}\n\n\t  }\n\n\t,\tgetContext: function()\n\t  {\n\t\tvar isError = false\n\t\t,\tresponse = ''\n\t\t,\tisResponse = false;\n\n\t\tif(this.promise){\n\t\t\tconsole.log(this.promise);\n\t\t  if(this.promise.responseJSON.hasOwnProperty('id'))\n\t\t  {\n\t\t\tresponse = 'Your application is successfully sent.';\n\t\t\tisError = false;\n\t\t\tisResponse = true;\n\t\t  }\n\t\t  else{\n\t\t\t response = 'Something went wrong! application could not sent.';\n\t\t\t isError = true;\n\t\t\t isResponse = true;\n\t\t  }\n\t\t}\n\t\treturn {\n\t\t  isError: isError\n\t\t,\tresponse: response\n\t\t,\tisResponse: isResponse\n\t\t};\n\t  }\n\n   });\nexport = CustomView;\n"]}