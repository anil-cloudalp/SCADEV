{"version":3,"sources":["DownItems.List.View.ts"],"names":[],"mappings":"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","file":"DownItems.List.View.js","sourcesContent":["/// <amd-module name=\"DownItems.List.View\"/>\n\nimport * as _ from 'underscore';\nimport * as order_history_list_tpl from 'order_history_list.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../../Advanced/SCA/JavaScript/Configuration';\nimport { ListHeaderView } from '../../../Commons/ListHeader/JavaScript/ListHeader.View';\nimport { GlobalViewsPaginationView } from '../../../Commons/GlobalViews/JavaScript/GlobalViews.Pagination.View';\nimport { GlobalViewsShowingCurrentView } from '../../../Commons/GlobalViews/JavaScript/GlobalViews.ShowingCurrent.View';\n\nimport OrderHistoryListTrackingNumberView = require('../../../Advanced/OrderHistory/JavaScript/OrderHistory.List.Tracking.Number.View');\nimport TransactionListView = require('../../../Commons/Transaction/JavaScript/Transaction.List.View');\nimport OrderHistoryCollection = require('../../../Advanced/OrderHistory/JavaScript/OrderHistory.Collection');\nimport RecordViewsActionableView = require('../../../Advanced/RecordViews/JavaScript/RecordViews.Actionable.View');\nimport Handlebars = require('../../../Commons/Utilities/JavaScript/Handlebars');\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneCollectionView = require('../../../Commons/Backbone.CollectionView/JavaScript/Backbone.CollectionView');\n\n// @class OrderHistory.List.View view list of orders @extend Backbone.View\nconst DownItemsListView: any = TransactionListView.extend({\n\t\t//@property {Function} template\n\t\ttemplate: order_history_list_tpl\n\t\t//@property {String} title\n\t,\ttitle: Utils.translate('Downloadable Items')\n\t\t//@property {String} className\n\t,\tclassName: 'DownItemsListView'\n\t\t//@property {String} page_header\n\t,\tpage_header: Utils.translate('Downloadable Items')\n\t\t//@property {Object} attributes\n\t,\tattributes: {\n\t\t\t'id': 'downloadableitems'\n\t\t,\t'class': 'DownItemsListView'\n\t\t}\n\t\t//@property {Object} events\n\t,\tevents: {\n\t\t\t//'click [data-action=\"navigate\"]': 'navigateToOrder'\n\t\t}\n\t\t//@method getSelectedMenu\n\t,\tgetSelectedMenu: function ()\n\t\t{\n\t\t\treturn 'downloadableitems';\n\t\t}\n\t\t//@method getBreadcrumbPages\n\t,\tgetBreadcrumbPages: function ()\n\t\t{\n\t\t\treturn {\n\t\t\t\t\ttext: this.title\n\t\t\t\t,\thref: '/downloadable-items'\n\t\t\t};\n\t\t}\n\t\t//@method initialize\n\t,\tinitialize: function (options)\n\t\t{\n\t\t\tthis.application = options.application;\n\t\t\t\n\t\t\tthis.collection = new OrderHistoryCollection([], {\n\t\t\t\t\tfilters: 'downitems:true'\n\t\t\t\t});\n\t\t\tthis.activeTab = 'all';\n\t\t\t\n\t\t\tthis.isSCISIntegrationEnabled = Configuration.get('siteSettings.isSCISIntegrationEnabled', false);\n\n\t\t\tvar isoDate = Utils.dateToString(new Date());\n\n\t\t\tthis.rangeFilterOptions = {\n\t\t\t\tfromMin: '1800-01-02'\n\t\t\t,\tfromMax: isoDate\n\t\t\t,\ttoMin: '1800-01-02'\n\t\t\t,\ttoMax: isoDate\n\t\t\t};\n\n\t\t\tthis.listenCollection();\n\n\t\t\t// Manages sorting and filtering of the collection\n\t\t\tthis.listHeader = new ListHeaderView({\n\t\t\t\tview: this\n\t\t\t,\tapplication: this.application\n\t\t\t,\tcollection: this.collection\n\t\t\t,\tsorts: this.sortOptions\n\t\t\t,\trangeFilter: 'date'\n\t\t\t,\trangeFilterLabel: Utils.translate('From')\n\t\t\t,\thidePagination: true\n\t\t\t,   allowEmptyBoundaries: true\n\t\t\t//,\tfilters: this.filterOptions\n\t\t\t});\n\t\t\tthis.collection.on('reset', this.showContent, this);\n\t\t}\n\t\n\t\t//@method listenCollection\n\t,\tlistenCollection: function ()\n\t\t{\n\t\t\tthis.setLoading(true);\n\n\t\t\tthis.collection.on({\n\t\t\t\trequest: jQuery.proxy(this, 'setLoading', true)\n\t\t\t,\treset: jQuery.proxy(this, 'setLoading', false)\n\t\t\t});\n\t\t}\n\t\t//@method setLoading\n\t,\tsetLoading: function (value)\n\t\t{\n\t\t\tthis.isLoading = value;\n\t\t}\n\t,\tgetStringDateFromDaysCount: function (days_back)\n\t\t{\n\t\t\tvar now = new Date();\n\t\t\treturn new Date(now.setDate(now.getDate() - days_back));\n\t\t}\n\t\t//@property {Array} sortOptions\n\t\t// Array of default sort options\n\t\t// sorts only apply on the current collection\n\t\t// which might be a filtered version of the original\n\t,\tsortOptions: [\n\t\t\t{\n\t\t\t\tvalue: 'custrecord_appf_downloadable_item'\n\t\t\t,\tname: Utils.translate('Sort By Item')\n\t\t\t,\tselected: true\n\t\t\t}\n\t\t,\t{\n\t\t\t\tvalue: 'created'\n\t\t\t,\tname: Utils.translate('Sort By Date')\n\t\t\t}\n\t\t\n\t\t]\n\t,\tfilterOptions: [\n\t\t\t{\n\t\t\t\tvalue: function ()\n\t\t\t\t{\n\t\t\t\t\treturn Utils.dateToString(this.getStringDateFromDaysCount(15)) + 'T'+ Utils.dateToString(new Date());\n\t\t\t\t}\n\t\t\t,\tname: Utils.translate('Show last 15 days')\n\t\t\t,\tclassName: 'reorder-items-filter-last-15-days'\n\t\t\t,\tselected: true\n\t\t\t}\n\t\t,\t{\n\t\t\t\tvalue: function ()\n\t\t\t\t{\n\t\t\t\t\treturn Utils.dateToString(this.getStringDateFromDaysCount(30)) + 'T'+ Utils.dateToString(new Date());\n\t\t\t\t}\n\t\t\t,\tname: Utils.translate('Show last 30 days')\n\t\t\t,\tclassName: 'reorder-items-filter-last-30-days'\n\t\t\t}\n\t\t,\t{\n\t\t\t\tvalue: function ()\n\t\t\t\t{\n\t\t\t\t\treturn Utils.dateToString(this.getStringDateFromDaysCount(60)) + 'T'+ Utils.dateToString(new Date());\n\t\t\t\t}\n\t\t\t,\tname: Utils.translate('Show last 60 days')\n\t\t\t,\tclassName: 'reorder-items-filter-last-60-days'\n\t\t\t}\n\t\t,\t{\n\t\t\t\tvalue: function ()\n\t\t\t\t{\n\t\t\t\t\treturn Utils.dateToString(this.getStringDateFromDaysCount(90)) + 'T'+ Utils.dateToString(new Date());\n\t\t\t\t}\n\t\t\t,\tname: Utils.translate('Show last 90 days')\n\t\t\t,\tclassName: 'reorder-items-filter-last-90-days'\n\t\t\t}\n\t\t,\t{\n\t\t\t\tvalue: function ()\n\t\t\t\t{\n\t\t\t\t\treturn Utils.dateToString(this.getStringDateFromDaysCount(180)) + 'T'+ Utils.dateToString(new Date());\n\t\t\t\t}\n\t\t\t,\tname: Utils.translate('Show last 180 days')\n\t\t\t,\tclassName: 'reorder-items-filter-last-180-days'\n\t\t\t}\n\t\t]\n\t\t//@property {Object} childViews\n\t,\tchildViews: {\n\t\t\t'ListHeader': function ()\n\t\t\t{\n\t\t\t\treturn this.listHeader;\n\t\t\t}\n\t\t,\t'GlobalViews.Pagination': function ()\n\t\t\t{\n\t\t\t\treturn new GlobalViewsPaginationView(_.extend({\n\t\t\t\t\ttotalPages: Math.ceil(this.collection.totalRecordsFound / this.collection.recordsPerPage)\n\t\t\t\t}, Configuration.defaultPaginationSettings));\n\t\t\t}\n\t\t,\t'GlobalViews.ShowCurrentPage': function ()\n\t\t\t{\n\t\t\t\treturn new GlobalViewsShowingCurrentView({\n\t\t\t\t\titems_per_page: this.collection.recordsPerPage\n\t\t \t\t,\ttotal_items: this.collection.totalRecordsFound\n\t\t\t\t,\ttotal_pages: Math.ceil(this.collection.totalRecordsFound / this.collection.recordsPerPage)\n\t\t\t\t});\n\t\t\t}\n\t\t,\t'Order.History.Results': function ()\n\t\t\t{\n\t\t\t\treturn this._resultsView;\n\t\t\t}\n\t\t}\n\t,\t_buildResultsView: function ()\n\t\t{\n\t\t\tvar self = this\n\t\t\tvar selectedColumns = [];\n\n\t\t\t\n\t\t\tselectedColumns.push({label: 'Item Name', id: 'item', type:'item'});\n\t\t\t\n\t\t\tselectedColumns.push({label: 'Date', id: 'created', type:'created'});\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tvar\trecords_collection = new Backbone.Collection(this.collection.map(function (order)\n\t\t\t{\n\t\t\t\tvar soName = (order.get('soName')).replace('Sales Order #','');\n\t\t\t\t\n\t\t\t\tvar model = new Backbone.Model({\n\t\t\t\t\t\ttitle: new Handlebars.SafeString(Utils.translate('<span class=\"tranid\">' + soName + '</span>'))\n\t\t\t\t\t,\ttouchpoint: 'customercenter'\n\t\t\t\t\t,\tdetailsURL: '/purchases/view/salesorder/' + order.get('tranid')\n\t\t\t\t\t,\trecordType: order.get('recordtype')\n\t\t\t\t\t,\tid: order.get('internalid')\n\t\t\t\t\t,\tinternalid: order.get('internalid')\n\t\t\t\t\t,\tisDownloadable: order.get('isDownloadable')\n\t\t\t\t\t,\titemId: order.get('itemId')\n\t\t\t\t\t,\tcolumns: self._buildColumns(selectedColumns, order)\n\t\t\t\t});\n\t\t\t\treturn model;\n\t\t\t}));\n\n\t\t\treturn new BackboneCollectionView({\n\t\t\t\t\tchildView: RecordViewsActionableView\n\t\t\t\t,\tcollection: records_collection\n\t\t\t\t,\tviewsPerRow: 1\n\t\t\t\t,\tchildViewOptions: {\n\t\t\t\t\t\tactionView: OrderHistoryListTrackingNumberView\n\t\t\t\t\t,\tactionOptions: {\n\t\t\t\t\t\t\tshowContentOnEmpty: true\n\t\t\t\t\t\t,\tcontentClass: ''\n\t\t\t\t\t\t,\tcollapseElements: true\n\t\t\t\t\t\t,\tdownloadableitems: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t//@method getContext @return DownItems.List.View.Context\n\t,\tgetContext: function ()\n\t\t{\t\n\t\t\t//console.log(this);\n\t\t\tthis._resultsView = this._buildResultsView();\n\t\t\tvar columns = [];\n\t\t\tif (this._resultsView.collection.length > 0)\n\t\t\t{\n\t\t\t\tcolumns = this._resultsView.collection.at(0).get('columns');\n\t\t\t}\n\t\t\t//@class DownItems.List.View.Context\n\t\t\treturn {\n\t\t\t\t//@property {String} pageHeader\n\t\t\t\tpageHeader: this.page_header\n\t\t\t\t//@property {Boolean} collectionLengthGreaterThan0\n\t\t\t,\tcollectionLengthGreaterThan0: this.collection.length > 0\n\t\t\t\t//@property {Boolean} isLoading\n\t\t\t,\tisLoading: this.isLoading\n\t\t\t\t// @property {Boolean} showPagination\n\t\t\t,\tshowPagination: !!(this.collection.totalRecordsFound && this.collection.recordsPerPage)\n\t\t\t\t//@property {Boolean} showBackToAccount\n\t\t\t,\tshowBackToAccount: Configuration.get('siteSettings.sitetype') === 'STANDARD'\n\t\t\t\t//@property {Boolean} isSCISIntegrationEnabled\n\t\t\t,\tisSCISIntegrationEnabled: this.isSCISIntegrationEnabled\n\t\t\t\t//@property {Boolean} allIsActive\n\t\t\t,\tallIsActive: this.activeTab === 'all'\n\t\t\t\t//@property {Boolean} openIsActive\n\t\t\t,\topenIsActive: this.activeTab === 'open'\n\t\t\t\t//@property {Boolean} inStoreIsActive\n\t\t\t,\tinStoreIsActive: this.activeTab === 'instore'\n\t\t\t\t//@property {Array<{}>} columns\n\t\t\t,\tcolumns: columns\n\t\t\t,\tdownitems: true\n\t\t\t};\n\t\t}\n\t});\n\nexport = DownItemsListView;"]}