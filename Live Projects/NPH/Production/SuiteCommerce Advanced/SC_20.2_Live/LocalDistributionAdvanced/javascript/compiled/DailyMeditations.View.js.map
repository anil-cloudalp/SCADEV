{"version":3,"sources":["DailyMeditations.View.ts"],"names":[],"mappings":"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","file":"DailyMeditations.View.js","sourcesContent":["/// <amd-module name=\"DailyMeditations.View\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/UnderscoreExtended.d.ts\"/>\n\nimport * as _ from 'underscore';\nimport * as daily_meditations_tpl from 'daily_meditations.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../../Advanced/SCA/JavaScript/Configuration';\n\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\nimport { GlobalViewsPaginationView } from '../../../Commons/GlobalViews/JavaScript/GlobalViews.Pagination.View';\n\nconst CustomView: any = BackboneView.extend({\n\t//@property {Function} template\n\ttemplate: daily_meditations_tpl\n\t//@property {String} title\n,\ttitle: Utils.translate('Daily Meditations')\n\t//@property {String} className\n,\tclassName: 'DailyMeditationsView'\n\t//@property {String} page_header\n,\tpage_header: Utils.translate('Daily Meditations')\n\n,\tattributes: {\n\t\t'id': 'daily_meditations'\n\t,\t'class': 'DailyMeditationsView'\n\t}\n\t//@property {Object} events\n,\tevents: {\n\t\t'click #prev-mo': 'prevMo'\n\t,\t'click #next-mo': 'nextMo'\n\t,\t'click #prev-yr': 'prevYr'\n\t,\t'click #next-yr': 'nextYr'\n\t,\t'click [data-date]': 'handleDate'\n\t}\n,\thandleDate: function(e)\n\t{\n\t\t\n\t\tif($(e.target).is('p'))\n\t\t\tvar dateEl = $(e.target);\n\t\telse\n\t\t\tvar dateEl = $(e.target).parent();\n\t\t\n\t\tvar emeds_date = dateEl.attr('data-date');\n\t\tvar today = new Date();\n\t\t\n\t\tif((new Date(emeds_date).getTime()) <= today.getTime()){\n\t\t\t\n\t\t\t$('[data-date]').removeClass('bg-info');\n\t\t\tdateEl.addClass('bg-info');\n\t\t\n\t\t\tthis.emeds_date = emeds_date;\n\t\t\t\n\t\t\tvar self = this;\n\t\t\tthis.refreshData().then(function(){\n\t\t\t\tself.$('#daily-meditations').html(self.createHtml());\n\t\t\t});\n\t\t\t\n\t\t}\n\t}\n,\trefreshData: function()\n\t{\n\t\t\n\t\tthis.filters = {\n\t\t\ttype: 'EMEDS',\n\t\t\tresults_per_page: 20,\n\t\t\tdate: this.emeds_date\n\t\t}\n\t\t\n\t\t\n\t\treturn this.getResults(this.filters);\n\t}\n\t//@method getSelectedMenu\n,\tgetSelectedMenu: function ()\n\t{\n\t\treturn 'my_subscriptions';\n\t}\n\t//@method getBreadcrumbPages\n,\tgetBreadcrumbPages: function ()\n\t{\n\t\treturn {\n\t\t\t\ttext: this.title\n\t\t\t,\thref: '/daily_meditations'\n\t\t};\n\t}\n\t//@method initialize\n,\tinitialize: function (options)\n\t{\n\t\tthis.application = options.application;\n\t\t\n\t\tvar calendar:any = {};\n\t\tcalendar.today = new Date();\n\t\tcalendar.currentMonth = calendar.today.getMonth();\n\t\tcalendar.currentYear = calendar.today.getFullYear();\n\t\tcalendar.months = ['January','February','March','April','May','June','July','August','September','October','November','December'];\n\t\t\n\t\tthis.calendar = calendar;\n\t\tthis.emeds_date = (calendar.currentMonth + 1) +'/'+ calendar.today.getDate() +'/'+ calendar.currentYear;\n\t\t\n\t\tvar self = this;\n\t\tthis.once('afterViewRender',function(){\n\t\t\tself.showCalendar(calendar.currentMonth,calendar.currentYear);\n\t\t\tself.$('#daily-meditations').html(self.createHtml());\n\t\t});\n\t}\n,\tbeforeShowContent: function()\n\t{\t\n\t\treturn this.refreshData();\n\t}\n,\tgetResults: function(data)\n\t{\n\t\tvar self = this;\n\t\t\n\t\tvar promise = new Backbone.Model().save(\n\t\t\t\t\tdata\n\t\t\t\t,\t{\n\t\t\t\t\t\turl: Utils.getAbsoluteUrl('services/Subscriptions.Service.ss')\n\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tpromise.then(function(result){\n\t\t\t\t\t\n\t\t\t\t\tself.collection = result;\n\t\t\t\t});\n\t\t\t\t\n\t\t\treturn promise;\n\t}\n\n\t//@property {Object} childViews\n,\tchildViews: {\n\t\t\n\t}\n,\tcreateHtml: function()\n\t{\n\t\tvar\trecords = _.has(this.collection,'records')? this.collection.records: [];\n\t\tvar haveSubscription = _.has(this.collection,'haveSubscription')? this.collection.haveSubscription: true;\n\t\t\n\t\tvar html = '';\n\t\t\n\t\tif(haveSubscription){\n\t\t\tif(records.length){\n\t\t\t\t_.each(records,function(rec:any){\n\t\t\t\t\thtml +='<h2>'+ rec.title +'</h2>';\n\t\t\t\t\thtml +='<div class=\"emeds-content\">'+ rec.content +'</div>';\n\t\t\t\t});\n\t\t\t}\n\t\t\telse{\n\t\t\t\thtml +='<h2> No Records Available</h2>';\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\thtml +='<h2> No subscriptions Available</h2>';\n\t\t}\n\t\t\n\t\treturn html;\n\t}\n,\tnextMo: function(e)\n\t{\n\t\te.stopPropagation();\n\t\t\n\t\tif((this.calendar.currentYear == this.calendar.today.getFullYear()) && (this.calendar.currentMonth == this.calendar.today.getMonth()))\n\t\t\treturn;\n\t\t\n\t\tthis.calendar.currentYear = (this.calendar.currentMonth === 11) ? this.calendar.currentYear + 1 : this.calendar.currentYear;\n\t\tthis.calendar.currentMonth = (this.calendar.currentMonth + 1) % 12;\n\t\tthis.showCalendar(this.calendar.currentMonth, this.calendar.currentYear);\n\t}\n\n,\tprevMo: function(e)\n\t{\n\t\te.stopPropagation();\n\t\tthis.calendar.currentYear = (this.calendar.currentMonth === 0) ? this.calendar.currentYear - 1 : this.calendar.currentYear;\n\t\tthis.calendar.currentMonth = (this.calendar.currentMonth === 0) ? 11 : this.calendar.currentMonth - 1;\n\t\tthis.showCalendar(this.calendar.currentMonth, this.calendar.currentYear);\n\t}\n,\tnextYr: function(e)\n\t{\n\t\te.stopPropagation();\n\t\tif(this.calendar.currentYear == this.calendar.today.getFullYear())\n\t\t\treturn;\n\t\t\n\t\tif(((this.calendar.currentYear + 1) == this.calendar.today.getFullYear()) && (this.calendar.currentMonth > this.calendar.today.getMonth()))\n\t\t\tthis.calendar.currentMonth = this.calendar.today.getMonth();\n\t\t\t\n\t\tthis.calendar.currentYear++;\n\t\tthis.showCalendar(this.calendar.currentMonth, this.calendar.currentYear);\n\t\t\n\t}\n\n,\tprevYr: function(e)\n\t{\n\t\te.stopPropagation();\n\t\tthis.calendar.currentYear--;\n\t\tthis.showCalendar(this.calendar.currentMonth, this.calendar.currentYear);\n\t}\n,\tgetSlides: function()\n\t{\n\t\tvar screenWidth = window.screen.width;\n\t\tvar slides;\n\t\t\n\t\tif(screenWidth <= 510)\n\t\t\tslides = 4;\n\t\t\n\t\tif(screenWidth > 510)\n\t\t\tslides = 8;\n\t\treturn slides;\n\t}\n,\tshowCalendar: function(month, year)\n\t{\n\t\t\n\n\t\tvar firstDay = (new Date(year, month)).getDay();\n\t\tvar daysInMonth = 32 - new Date(year, month, 32).getDate();\n\t\t\n\t\tvar today = this.calendar.today;\n\t\tvar tbl = this.$('#calender-dates'); // body of the calendar\n\t\t\n\t\t// clearing all previous cells\n\t\ttbl.html('');\n\t\n\t\t// filing data about month and in the page via DOM.\n\t\tthis.$('#calender-month').text(this.calendar.months[month]);\n\t\tthis.$('#calender-year').text(year);\n\t\t\n\t\t// creating all cells\n\t\tvar date = 1;\n\t\tvar slides = 9;\n\t\tvar startSlide = 0;\n\t\t\n\t\tvar row = document.createElement(\"div\");\n\t\trow.setAttribute('id','calendar-dates-row');\n\t\tfor (var i = 0; i < 31; i++) {\n\n\t\t\t\tif ( (date > daysInMonth) || (date > today.getDate() && year === today.getFullYear() && month === today.getMonth()) ){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\tvar cell = document.createElement(\"p\");\n\t\t\t\t\t\n\t\t\t\t\tcell.setAttribute('data-date',(month + 1) +'/'+date +'/'+ year);\n\t\t\t\t\t\n\t\t\t\t\tvar cellText = '<div class=\"date\">' + date + '</div>' + this.calendar.months[month]; //document.createTextNode(date + \" \" + this.calendar.months[month]);\n\t\t\t\t\tif (date === today.getDate() && year === today.getFullYear() && month === today.getMonth()) {\n\t\t\t\t\t\tcell.classList.add(\"bg-info\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tslides = this.getSlides();\n\t\t\t\t\t\t\n\t\t\t\t\t\tstartSlide = (today.getDate() - 1)/slides;\n\t\t\t\t\t\t\n\t\t\t\t\t} // color today's date\n\t\t\t\t\t//cell.appendChild(cellText);\n\t\t\t\t\t$(cell).append(cellText);\n\t\t\t\t\trow.appendChild(cell);\n\t\t\t\t\tdate++;\n\t\t\t\t}\n\t\t}\n\t\t\n\t\ttbl.append(row); // appending each row into calendar body.\n\t\tvar self = this;\n\t\t\n\t\t\n\t\t\n\t\tthis.$('#calendar-dates-row').ready(\n\t\t\tsetTimeout(function(){\n\t\t\t\tUtils.initBxSlider(self.$('#calendar-dates-row'),{\n\t\t\t\t\tslideWidth: 100,\n\t\t\t\t\tminSlides: 4,\n\t\t\t\t\tmaxSlides:slides,\n\t\t\t\t\tforceStart: true,\n\t\t\t\t\tpager: false,\n\t\t\t\t\ttouchEnabled: true,\n\t\t\t\t\tnextText: '<span id=\"next-dt\"></span>',\n\t\t\t\t\tprevText: '<span id=\"prev-dt\"></span>',\n\t\t\t\t\tcontrols: true,\n\t\t\t\t\tpreloadImages: \"all\",\n\t\t\t\t\tinfiniteLoop:false,\n\t\t\t\t\tstartSlide: startSlide\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t}, 100)\n\t\t);\n\t\t\n\t}\n\t//@method getContext @return DailyMeditations.View.Context\n,\tgetContext: function ()\n\t{\t\n\t\t\n\t\t//@class DailyMeditations.View.Context\n\t\treturn {\n\t\t\thaveSubscription: _.has(this.collection,'haveSubscription')? this.collection.haveSubscription: true\n\t\t};\n\t}\n});\nexport = CustomView;"]}