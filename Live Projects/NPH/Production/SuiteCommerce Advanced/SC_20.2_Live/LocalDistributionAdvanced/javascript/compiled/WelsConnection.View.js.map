{"version":3,"sources":["WelsConnection.View.ts"],"names":[],"mappings":"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","file":"WelsConnection.View.js","sourcesContent":["/// <amd-module name=\"WelsConnection.View\"/>\n/// <reference path=\"../../../Commons/Utilities/JavaScript/UnderscoreExtended.d.ts\"/>\n\nimport * as _ from 'underscore';\nimport * as wels_connection_tpl from 'wels_connection.tpl';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { Configuration } from '../../../Advanced/SCA/JavaScript/Configuration';\n\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\nimport { GlobalViewsPaginationView } from '../../../Commons/GlobalViews/JavaScript/GlobalViews.Pagination.View';\n\nconst CustomView: any = BackboneView.extend({\n\t\n\ttemplate: wels_connection_tpl\n\n,\ttitle: Utils.translate('WELS Connection')\n\n,\tpage_header: Utils.translate('WELS Connection')\n\n,\tattributes: {\n\t\t'id': 'wels_connection'\n\t,\t'class': 'SubscriptionsView'\n\t}\n\n,\tevents: {\n\t\n\t}\n\t\n,\tgetSelectedMenu: function ()\n\t{\n\t\treturn 'my_subscriptions';\n\t}\n\t\n,\tgetBreadcrumbPages: function ()\n\t{\n\t\treturn {\n\t\t\t\ttext: this.title\n\t\t\t,\thref: '/wels-connection-detail'\n\t\t};\n\t}\n\t//@method initialize\n,\tinitialize: function (options)\n\t{\n\t\tthis.application = options.application;\n\t\t\n\t\tthis.isKidsConnection = (Backbone.history.fragment.indexOf('kids-connection') != -1)?true:false;\n\t\t\n\t\tif(this.isKidsConnection){\n\t\t\tthis.title = Utils.translate(\"Kid's Connection\");\n\t\t\tthis.page_header =  Utils.translate(\"Kid's Connection\");\n\t\t}\n\t\t\n\t\t\n\t}\n,\tbeforeShowContent: function()\n\t{\n\t\tvar url_options = Utils.parseUrlOptions(Backbone.history.fragment);\n\t\t\n\t\tvar type = (this.isKidsConnection == true)?'KC': 'WC';\n\t\t\n\t\tthis.filters = {\n\t\t\tpage: this.getPageFromUrl(url_options.page),\n\t\t\ttype: type,\n\t\t\tresults_per_page: 20\n\t\t}\n\t\t\n\t\t\n\t\treturn this.getResults(this.filters);\n\t\t\n\t}\n,\tgetPageFromUrl: function (url_value)\n\t{\n\t\tvar page_number = parseInt(url_value, 10);\n\n\t\treturn !isNaN(page_number) && page_number > 0 ? page_number : 1;\n\t}\n,\tgetResults: function(data)\n\t{\n\t\tvar self = this;\n\t\t\n\t\tvar promise = new Backbone.Model().save(\n\t\t\t\t\tdata\n\t\t\t\t,\t{\n\t\t\t\t\t\turl: Utils.getAbsoluteUrl('services/Subscriptions.Service.ss')\n\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tpromise.then(function(result){\n\t\t\t\t\t\n\t\t\t\t\tself.collection = result;\n\t\t\t\t});\n\t\t\t\t\n\t\t\treturn promise;\n\t}\n\t//@property {Object} childViews\n,\tchildViews: {\n\t\t'GlobalViews.Pagination': function ()\n\t\t{\n\t\t\treturn new GlobalViewsPaginationView(_.extend({\n\t\t\t\ttotalPages: Math.ceil(this.collection.totalRecordsFound / this.collection.recordsPerPage)\n\t\t\t}, Configuration.defaultPaginationSettings));\n\t\t}\n\t}\n\n\t\n,\tgetContext: function ()\n\t{\t\n\t\t\n\t\t\n\t\treturn {\n\t\t\trecords: _.has(this.collection,'records')? this.collection.records: []\n\t\t,\thaveSubscription: _.has(this.collection,'haveSubscription')? this.collection.haveSubscription: true\n\t\t,\tisKidsConnection: this.isKidsConnection\n\t\t\n\t\t};\n\t}\n});\n\nexport = CustomView;\n\n"]}